<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>User.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">javadb</a> &gt; <a href="index.source.html" class="el_package">com.example.javadb.model</a> &gt; <span class="el_source">User.java</span></div><h1>User.java</h1><pre class="source lang-java linenums">package com.example.javadb.model;

import jakarta.persistence.CascadeType;
import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.OneToMany;
import jakarta.persistence.Table;

import java.sql.Timestamp;
import java.util.List;

/**
 * Represents a user entity in the system.
 * A user can have multiple community memberships.
 */
@Entity
@Table(name = &quot;users&quot;)
public final class User {

  /** Maximum allowed latitude. */
  private static final double MAX_LATITUDE = 90;
  /** Minimum allowed latitude. */
  private static final double MIN_LATITUDE = -90;
  /** Maximum allowed longitude. */
  private static final double MAX_LONGITUDE = 180;
  /** Minimum allowed longitude. */
  private static final double MIN_LONGITUDE = -180;
  /** Maximum length for name or email fields. */
  private static final int MAX_LENGTH = 100;

  /** The unique ID of the user. */
  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(name = &quot;user_id&quot;)
  private int userId;

  /** The name of the user. */
  @Column(name = &quot;name&quot;, nullable = false, length = MAX_LENGTH)
  private String name;

  /** The email address of the user. */
  @Column(name = &quot;email&quot;, nullable = false, unique = true, length = MAX_LENGTH)
  private String email;

  /** The age of the user. */
  @Column(name = &quot;age&quot;)
  private int age;

  /** The sex of the user. */
  @Enumerated(EnumType.STRING)
  @Column(name = &quot;sex&quot;, nullable = false)
  private Sex sex;

  /** The latitude of the user's location. */
  @Column(name = &quot;latitude&quot;)
  private double latitude;

  /** The longitude of the user's location. */
  @Column(name = &quot;longitude&quot;)
  private double longitude;

  /** Timestamp indicating when the user was created. */
  @Column(name = &quot;created_at&quot;, nullable = false, updatable = false)
  private Timestamp createdAt;

  /** Timestamp indicating when the user was last updated. */
  @Column(name = &quot;updated_at&quot;, nullable = false)
  private Timestamp updatedAt;

  /** List of community memberships associated with the user. */
  @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, orphanRemoval = true)
  private List&lt;UserCommunity&gt; communityMembership;

  /**
   * Enum representing the sex of the user.
   */
<span class="fc" id="L82">  public enum Sex {</span>
    /** Male enum. */
<span class="fc" id="L84">    MALE,</span>
    /** Female enum. */
<span class="fc" id="L86">    FEMALE,</span>
    /** Other enum. */
<span class="fc" id="L88">    OTHER</span>
  }

  /**
   * Default constructor for JPA.
   */
<span class="fc" id="L94">  public User() {</span>
    // Empty constructor
<span class="fc" id="L96">  }</span>

  /**
   * Constructs a new User with the specified attributes.
   *
   * @param newName the name of the user
   * @param newEmail the email address of the user
   * @param newAge the age of the user
   * @param newSex the sex of the user
   * @param newLatitude the latitude of the user's location
   * @param newLongitude the longitude of the user's location
   * @param newCreatedAt the creation timestamp
   * @param newUpdatedAt the last updated timestamp
   */
  public User(final String newName, final String newEmail, final int newAge,
              final Sex newSex, final double newLatitude,
              final double newLongitude,
<span class="fc" id="L113">              final Timestamp newCreatedAt, final Timestamp newUpdatedAt) {</span>
<span class="fc" id="L114">    this.name = newName;</span>
<span class="fc" id="L115">    this.email = newEmail;</span>
<span class="fc" id="L116">    this.age = newAge;</span>
<span class="fc" id="L117">    this.sex = newSex;</span>
<span class="fc" id="L118">    this.latitude = newLatitude;</span>
<span class="fc" id="L119">    this.longitude = newLongitude;</span>
<span class="fc" id="L120">    this.createdAt = newCreatedAt;</span>
<span class="fc" id="L121">    this.updatedAt = newUpdatedAt;</span>
<span class="fc" id="L122">  }</span>

  /**
   * Gets the user ID.
   *
   * @return the user ID
   */
  public int getUserId() {
<span class="fc" id="L130">    return userId;</span>
  }

  /**
   * Gets the user's name.
   *
   * @return the user's name
   */
  public String getName() {
<span class="fc" id="L139">    return name;</span>
  }

  /**
   * Sets the user's name.
   *
   * @param newName the name to set
   * @throws IllegalArgumentException if the name is null or empty
   */
  public void setName(final String newName) {
<span class="fc bfc" id="L149" title="All 4 branches covered.">    if (newName == null || newName.trim().isEmpty()) {</span>
<span class="fc" id="L150">      throw new IllegalArgumentException(&quot;Name cannot be null or empty&quot;);</span>
    }
<span class="fc" id="L152">    this.name = newName;</span>
<span class="fc" id="L153">  }</span>

  /**
   * Gets the user's email address.
   *
   * @return the user's email address
   */
  public String getEmail() {
<span class="fc" id="L161">    return email;</span>
  }

  /**
   * Sets the user's email address.
   *
   * @param newEmail the email to set
   * @throws IllegalArgumentException if the email is invalid
   */
  public void setEmail(final String newEmail) {
<span class="fc bfc" id="L171" title="All 4 branches covered.">    if (newEmail == null || !newEmail.contains(&quot;@&quot;)) {</span>
<span class="fc" id="L172">      throw new IllegalArgumentException(&quot;Invalid email address&quot;);</span>
    }
<span class="fc" id="L174">    this.email = newEmail;</span>
<span class="fc" id="L175">  }</span>

  /**
   * Gets the user's age.
   *
   * @return the user's age
   */
  public int getAge() {
<span class="fc" id="L183">    return age;</span>
  }

  /**
   * Sets the user's age.
   *
   * @param newAge the age to set
   * @throws IllegalArgumentException if the age is negative
   */
  public void setAge(final int newAge) {
<span class="fc bfc" id="L193" title="All 2 branches covered.">    if (newAge &lt; 0) {</span>
<span class="fc" id="L194">      throw new IllegalArgumentException(&quot;Age cannot be negative&quot;);</span>
    }
<span class="fc" id="L196">    this.age = newAge;</span>
<span class="fc" id="L197">  }</span>

  /**
   * Gets the user's sex.
   *
   * @return the user's sex
   */
  public Sex getSex() {
<span class="fc" id="L205">    return sex;</span>
  }

  /**
   * Sets the user's sex.
   *
   * @param newSex the sex to set
   * @throws IllegalArgumentException if the sex is null
   */
  public void setSex(final Sex newSex) {
<span class="fc bfc" id="L215" title="All 2 branches covered.">    if (newSex == null) {</span>
<span class="fc" id="L216">      throw new IllegalArgumentException(&quot;Sex cannot be null&quot;);</span>
    }
<span class="fc" id="L218">    this.sex = newSex;</span>
<span class="fc" id="L219">  }</span>

  /**
   * Gets the latitude of the user's location.
   *
   * @return the latitude
   */
  public double getLatitude() {
<span class="fc" id="L227">    return latitude;</span>
  }

  /**
   * Sets the latitude of the user's location.
   *
   * @param newLatitude the latitude to set
   */
  public void setLatitude(final double newLatitude) {
<span class="fc bfc" id="L236" title="All 4 branches covered.">    if (newLatitude &lt; MIN_LATITUDE || newLatitude &gt; MAX_LATITUDE) {</span>
<span class="fc" id="L237">      throw new IllegalArgumentException(&quot;Latitude must be between -90 and 90&quot;);</span>
    }
<span class="fc" id="L239">    this.latitude = newLatitude;</span>
<span class="fc" id="L240">  }</span>

  /**
   * Gets the longitude of the user's location.
   *
   * @return the longitude
   */
  public double getLongitude() {
<span class="fc" id="L248">    return longitude;</span>
  }

  /**
   * Sets the longitude of the user's location.
   *
   * @param newLongitude the longitude to set
   */
  public void setLongitude(final double newLongitude) {
<span class="fc bfc" id="L257" title="All 4 branches covered.">    if (newLongitude &lt; MIN_LONGITUDE || newLongitude &gt; MAX_LONGITUDE) {</span>
<span class="fc" id="L258">      throw new IllegalArgumentException(&quot;Longitude &quot;</span>
              + &quot;must be between -180 and 180&quot;);
    }
<span class="fc" id="L261">    this.longitude = newLongitude;</span>
<span class="fc" id="L262">  }</span>

  /**
   * Gets the timestamp of when the user was created.
   *
   * @return the creation timestamp
   */
  public Timestamp getCreatedAt() {
<span class="fc" id="L270">    return createdAt;</span>
  }

  /**
   * Sets the creation timestamp.
   *
   * @param newCreatedAt the timestamp to set
   */
  public void setCreatedAt(final Timestamp newCreatedAt) {
<span class="fc" id="L279">    this.createdAt = newCreatedAt;</span>
<span class="fc" id="L280">  }</span>

  /**
   * Gets the timestamp of when the user was last updated.
   *
   * @return the last updated timestamp
   */
  public Timestamp getUpdatedAt() {
<span class="fc" id="L288">    return updatedAt;</span>
  }

  /**
   * Sets the last updated timestamp.
   *
   * @param newUpdatedAt the timestamp to set
   */
  public void setUpdatedAt(final Timestamp newUpdatedAt) {
<span class="fc" id="L297">    this.updatedAt = newUpdatedAt;</span>
<span class="fc" id="L298">  }</span>

  /**
   * Gets the user's community memberships.
   *
   * @return the list of community memberships
   */
  public List&lt;UserCommunity&gt; getCommunityMembership() {
<span class="fc" id="L306">    return communityMembership;</span>
  }

  /**
   * Sets the user's community memberships.
   *
   * @param newCommunityMembership the community memberships to set
   */
  public void setCommunityMembership(final List&lt;UserCommunity&gt;
                                             newCommunityMembership) {
<span class="fc" id="L316">    this.communityMembership = newCommunityMembership;</span>
<span class="fc" id="L317">  }</span>

  /**
   * Gets the number of communities the user belongs to.
   *
   * @return the number of communities
   */
  public int getNumberOfCommunities() {
<span class="fc bfc" id="L325" title="All 2 branches covered.">    return communityMembership == null ? 0 : communityMembership.size();</span>
  }

  /**
   * Returns a string representation of the user.
   *
   * @return the string representation of the user
   */
  @Override
  public String toString() {
<span class="fc" id="L335">    return &quot;User{&quot;</span>
            + &quot;userId=&quot; + userId
            + &quot;, name='&quot; + name + '\''
            + &quot;, email='&quot; + email + '\''
            + &quot;, age=&quot; + age
            + &quot;, sex=&quot; + sex
            + &quot;, latitude=&quot; + latitude
            + &quot;, longitude=&quot; + longitude
            + &quot;, createdAt=&quot; + createdAt
            + &quot;, updatedAt=&quot; + updatedAt
            + &quot;, communityMembership=&quot; + communityMembership
            + '}';
  }
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>